{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/2020/custom-spread-operator","result":{"data":{"markdownRemark":{"html":"<p><br /><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/__GATSBY_RELATIVE_PATH__/static/661373c7c4df2d461091a7dc2db7a494/a4f52/custom-spread-operator.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 41.142857142857146%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABZElEQVQoz43RTS8DQRwG8D3T7uzs7nRfTLvbbl92tUsQIuotGsGB7+GIkJC4iIiQ+BZ8AC8HHLi4EnEQcfFBmnnMroRL0cMvz5ye/8x/lKWTj/bs7kN7cvOmo6mt/9ymOb191148fm8r84evKA4vg1kVGPkGTC+Czvuh5RIRVLP2NxYiq5dB+Qhmdu6htPafhFudFbrqCMoqgmgFodKS0Iwg1Us80at6X9mRL3qyXKgsEs2NK6HM7T2iELegswC5vhiuF4O4PhiP4PABaHZZCpDRSlKxgxLkQBD5oub6JdJCrz4Hh3mw84Ow7CosXpOF/SBGGbpVA81VQVkVeq4G0w6/zwmaJKuAOvFPoRvOQCNcFgQgNA9qFpElvpxc6IKHngxP99lcv0h2+Ax/aAWOG8LyR+TtYhh9g6lkKrHqUuN3dgOq/DzDG8fk5jWUhaO39DC6eoax1dPv/HLWtYm1c8wfvOAToCwJIfXCXQ0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Custom Spread Operator\" title=\"Custom Spread Operator\" src=\"/__GATSBY_RELATIVE_PATH__/static/661373c7c4df2d461091a7dc2db7a494/8c557/custom-spread-operator.png\" srcset=\"/__GATSBY_RELATIVE_PATH__/static/661373c7c4df2d461091a7dc2db7a494/4edbd/custom-spread-operator.png 175w,\n/__GATSBY_RELATIVE_PATH__/static/661373c7c4df2d461091a7dc2db7a494/13ae7/custom-spread-operator.png 350w,\n/__GATSBY_RELATIVE_PATH__/static/661373c7c4df2d461091a7dc2db7a494/8c557/custom-spread-operator.png 700w,\n/__GATSBY_RELATIVE_PATH__/static/661373c7c4df2d461091a7dc2db7a494/e996b/custom-spread-operator.png 1050w,\n/__GATSBY_RELATIVE_PATH__/static/661373c7c4df2d461091a7dc2db7a494/2cefc/custom-spread-operator.png 1400w,\n/__GATSBY_RELATIVE_PATH__/static/661373c7c4df2d461091a7dc2db7a494/a4f52/custom-spread-operator.png 2024w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span><br /></p>\n<p>In javascript, <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax\" target=\"_blank\" rel=\"nofollow\">spread operator</a> is denoted by <strong>…</strong> (3 dots), basically it takes an array or object or string and can <strong>copy or expand or concat or merge</strong> its items to another variable.</p>\n<p>And we will not be looking into <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax#Rest_syntax_parameters\" target=\"_blank\" rel=\"nofollow\">rest parameters</a> which looks similar to spread operator but used for destructuring array and objects.</p>\n<h4>Example:</h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> str <span class=\"token operator\">=</span> <span class=\"token string\">'Hello World'</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// H e l l o   W o r l d</span>\n\n<span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'My Car'</span><span class=\"token punctuation\">,</span> modelYear<span class=\"token operator\">:</span> <span class=\"token string\">'2018'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> obj2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> model<span class=\"token operator\">:</span> <span class=\"token string\">'Ferrari'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>obj<span class=\"token punctuation\">,</span> obj2 <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// { \"name\": \"My Car\", \"modelYear\": \"2018\", \"model\": \"Ferrari\" }</span>\n\n<span class=\"token keyword\">var</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1 2 3 4 5</span></code></pre></div>\n<p>First, we will see its <strong>pros</strong> and <strong>cons</strong> and how it works then we will implement it.</p>\n<p>Let us start with the cons.</p>\n<h4>Cons:</h4>\n<ul>\n<li>It can be used for copying but <strong>only up to one level deep</strong>. So it is <strong>not suitable</strong> for <strong>multidimensional arrays and deep level objects</strong>.</li>\n<li>It can spread only <strong>enumerable</strong> properties of an <strong>Object</strong>.</li>\n<li>It can only be applied to <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/iterator\" target=\"_blank\" rel=\"nofollow\">iterable</a> objects.</li>\n<li>It will work on both <strong>Array</strong> and <strong>Object</strong> data types but you <strong>cannot mix and match</strong> them.</li>\n</ul>\n<h4>Pros:</h4>\n<ul>\n<li>It can be used for shallow cloning an object if we want to copy only that object's own properties.</li>\n<li><strong>Cleaner syntax</strong> and <strong>less code</strong> when merging or copying.</li>\n<li>Can be used with a function or a <strong>Math</strong> method without the need for <strong>.apply()</strong> method to pass multiple parameters.</li>\n<li>It can be used to <strong>convert an array like object</strong> into an <strong>actual array</strong>. (<strong>Eg: NodeList from DOM</strong>)</li>\n</ul>\n<p>Now we have an idea of what spread operator is and what it can and can't do.</p>\n<p>Let's implement our custom spread operator step by step.</p>\n<p><strong>Example: custom spread operator [...5]</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// This is how our Custom Spread Operator will look like</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token number\">.5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [1, 2, 3, 4, 5]</span>\n\n<span class=\"token comment\">// Above custom spread operator will not work now and</span>\n<span class=\"token comment\">// We will get the following error</span>\n<span class=\"token comment\">// Uncaught TypeError: number 5 is not iterable (cannot read property Symbol(Symbol.iterator))</span></code></pre></div>\n<h4>Step 1:</h4>\n<ul>\n<li>We will use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/iterator\" target=\"_blank\" rel=\"nofollow\">Symbol.iterator</a> to write our custom spread operator.</li>\n</ul>\n<h4>What is Symbol.iterator?</h4>\n<ol>\n<li><strong>Symbol.iterator</strong> let us to create a <strong>custom iterator</strong> function (not possible before ES6).</li>\n<li>It uses <strong>iterator protocol</strong> which defines a <strong>standard way</strong> to produce a <strong>sequence of values</strong> which is either <strong>finite</strong> or <strong>in-finite</strong> and return those values <strong>when all values</strong> are done or generated.</li>\n<li>Iterable <strong>data sources</strong> are <strong>Array</strong>, <strong>Sets</strong>, <strong>Maps</strong>, <strong>Objects</strong>, <strong>arguments</strong> and <strong>DOM data structures</strong> (Eg: <strong>NodeList</strong>) etc,.</li>\n</ol>\n<p><strong>Symbol.iterator</strong> contains two parts.</p>\n<ol>\n<li>An object whose key is <strong>Symbol.iterator</strong> called <code class=\"language-text\">Iterable</code>.</li>\n<li>A function for the above key called <code class=\"language-text\">Iterator</code> to iterate the values passed to it.</li>\n</ol>\n<p><strong>Example</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> myCustomIterator <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>iterator<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Simple right? 😆</p>\n<p>In the below example, we will create a simple <strong>iterable function</strong> to understand more.</p>\n<p><strong>👉🏻 Note:</strong> By default functions are <strong>not iterable</strong>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// A simple function which will accept a parameter called `n`</span>\n<span class=\"token comment\">// and it return myCustomIterator.</span>\n\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">generateNumbers</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> myCustomIterator <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>iterator<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Statement 1</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function-variable function\">next</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n            value<span class=\"token operator\">:</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Statement 3</span>\n            done<span class=\"token operator\">:</span> i <span class=\"token operator\">===</span> n <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Statement 2</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> myCustomIterator<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">generateNumbers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// return an iterable function</span></code></pre></div>\n<p>Explanation for above code:</p>\n<ul>\n<li><code class=\"language-text\">generateNumbers()</code> function upon calling it return an object.</li>\n<li>Returned object contains a method called <code class=\"language-text\">next()</code> and it in turn return an <strong>object</strong> with two properties called <strong>value</strong> &#x26; <strong>done</strong>.</li>\n<li>Method <code class=\"language-text\">next()</code> will be called on <strong>each iteration</strong>.</li>\n<li>Think of <code class=\"language-text\">value</code> property as <strong>third statement</strong> in for loop (Eg: <strong>for (statement 1; statement 2; i++)</strong>).</li>\n<li>Think of <code class=\"language-text\">done</code> property as <strong>second statement</strong> in for loop (Eg: <strong>for (statement 1; i === n + 2; i++)</strong>)</li>\n<li>So we will increment initial value <strong>i</strong> from <strong>1</strong> to <strong>n</strong>.</li>\n</ul>\n<p>To make sure our <code class=\"language-text\">generateNumbers()</code> is iterable we will use <strong>for of</strong> and <strong>spread operator</strong> loop in below example:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token keyword\">of</span> <span class=\"token function\">generateNumbers</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// prints from 1 to 5</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// It works 😆</span>\n\n<span class=\"token comment\">// Now we can do this</span>\n<span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token function\">generateNumbers</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// prints from 1 to 5</span>\n\n<span class=\"token comment\">// TADA 😁</span></code></pre></div>\n<p>Cool right? We made a function <strong>iterable</strong>.</p>\n<p>In our next and final step, we will make <strong>generateNumbers()</strong> as a native feature so that we can do this <code class=\"language-text\">[...5]</code> instead of <code class=\"language-text\">[...generateNumbers(5)]</code>.</p>\n<h4>Example:</h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Add Symbol.iterator to Number prototype</span>\n<span class=\"token class-name\">Number</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>iterator<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Statement 1</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">next</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        value<span class=\"token operator\">:</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Statement 3</span>\n        done<span class=\"token operator\">:</span> i <span class=\"token operator\">===</span> <span class=\"token keyword\">this</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Statement 2</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Now I can do this 🤪</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token number\">.5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// [1, 2, 3, 4, 5]</span></code></pre></div>\n<h3 id=\"final-thoughts\" style=\"position:relative;\">Final thoughts<a href=\"#final-thoughts\" aria-label=\"final thoughts permalink\" class=\"blog-post-heading-link after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p>Thanks to <a href=\"https://tc39.es/\" target=\"_blank\" rel=\"nofollow\">TC39</a> committee and <a href=\"https://github.com/tc39/proposals\" target=\"_blank\" rel=\"nofollow\">ES6</a> specs, we were able to write our own <strong>custom iterator function</strong> with <strong>spread operator</strong>. Would love to know how you are going to use <strong>Symbol.iterator</strong> now that you have learned about it.</p>\n<p>If you liked it <strong>tweet</strong> about it. Hoping you learned something new about javascript today.</p>\n<p>My next post is <strong>how a virtual DOM works</strong>. And if you are not subscribed, subscribe below :D</p>\n<hr />\n<h4>References:</h4>\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax\" target=\"_blank\" rel=\"nofollow\">MDN</a></li>\n<li><a href=\"https://tc39.es/proposal-object-rest-spread/\" target=\"_blank\" rel=\"nofollow\">Spread operator TC39 specification</a></li>\n<li><a href=\"https://exploringjs.com/es6/ch_iteration.html#ch_iteration\" target=\"_blank\" rel=\"nofollow\">Iterables and iterators</a></li>\n</ul>","frontmatter":{"date":"Mar 03, 2020","updated":null,"slug":"/blog/2020/custom-spread-operator","title":"Custom Spread Operator [...5]","relative":null},"fields":{"readingTime":{"text":"5 min read"}}}},"pageContext":{"slug":"/blog/2020/custom-spread-operator"}},"staticQueryHashes":[]}